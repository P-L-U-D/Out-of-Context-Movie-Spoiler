(this["webpackJsonpproject-6"]=this["webpackJsonpproject-6"]||[]).push([[0],{46:function(e,t,a){e.exports=a(84)},51:function(e,t,a){},79:function(e,t,a){},84:function(e,t,a){"use strict";a.r(t);var r=a(1),n=a.n(r),o=a(42),i=a.n(o),s=(a(51),a(11)),l=a(12),c=a(14),u=a(13),d=a(24),m=a(2),p=a(27),h=a.n(p),f=a(45),g=a(43),v=a(31),b=a(15),y=a.n(b),k=a(28),E=a.n(k);E.a.initializeApp({apiKey:"AIzaSyDHGxU6CsX_wSKhz928RUSBS8zVsXlzSHA",authDomain:"out-of-context-movie-spoiler.firebaseapp.com",databaseURL:"https://out-of-context-movie-spoiler.firebaseio.com",projectId:"out-of-context-movie-spoiler",storageBucket:"out-of-context-movie-spoiler.appspot.com",messagingSenderId:"639841748908",appId:"1:639841748908:web:aa131c98baa8dc1d4a1c09"});var S=E.a,w=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(){var e;return Object(s.a)(this,a),(e=t.call(this)).moreGifs=function(t,a){console.log(t.target.dataset.keyword);var r=t.target.dataset.keyword;y()({url:"https://api.giphy.com/v1/gifs/random",method:"GET",dataResponse:"json",params:{api_key:"NShPdQTfWnvbvgxLo7Jd7C5qDeFfrsLR",tag:r}}).then((function(t){var r=t.data.data,n=Object(v.a)(e.state.gifs);n[a]=r,e.setState({gifs:n})}))},e.handleSubmit=function(){var t=S.database().ref("savedResults"),a={movieTitle:e.props.movieTitle,gifs:e.state.gifs};t.push(a)},e.state={gifs:[],errorMessage:"",gifpicks:[]},e}return Object(l.a)(a,[{key:"componentDidUpdate",value:function(e){var t=this;if(this.props.gifWords!==e.gifWords){var a=function(){var e=Object(g.a)(h.a.mark((function e(a,r,o){var i,s,l,c,u,d;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([n(a),n(r),n(o)]);case 2:i=e.sent,s=Object(f.a)(i,3),l=s[0],c=s[1],u=s[2],(d=[]).push(l.data.data,c.data.data,u.data.data),t.setState({gifs:d});case 10:case"end":return e.stop()}}),e)})));return function(t,a,r){return e.apply(this,arguments)}}();console.log(this.props.gifWords);var r,n=function(e){return y()({url:"https://api.giphy.com/v1/gifs/translate",method:"GET",dataResponse:"json",params:{api_key:"NShPdQTfWnvbvgxLo7Jd7C5qDeFfrsLR",s:e}})};if(1===this.props.keywordResults.length||2===this.props.keywordResults.length||void 0===this.props.keywordResults||0===this.props.keywordResults.length){console.log("not enough keywords, running with title");return r=this.props.movieTitle,y()({url:"https://api.giphy.com/v1/gifs/search",method:"GET",dataResponse:"json",params:{api_key:"NShPdQTfWnvbvgxLo7Jd7C5qDeFfrsLR",q:r,limit:3}}).then((function(e){console.log(e),t.setState({gifs:e.data.data})}))}return console.log("random keywords running"),a.apply(void 0,Object(v.a)(this.props.gifWords)).catch((function(){t.setState({errorMessage:"I am so sorry, but no gifs for you right now. I am sick."})}))}}},{key:"render",value:function(){var e=this;return n.a.createElement(r.Fragment,null,n.a.createElement("div",{className:"wrapper gif-display"},n.a.createElement("h2",null,this.props.movieTitle),n.a.createElement("div",{className:"gif-box"},this.state.gifs.map((function(t,a){return n.a.createElement("div",{className:"gif-container",key:t.id},n.a.createElement("img",{onClick:function(t){return e.moreGifs(t,a)},src:t.images.fixed_width.url,"data-keyword":e.props.gifWords[a],alt:"Gif title: ".concat(t.title,". Provided by Giphy"),tabIndex:"0"}))})),""===this.state.errorMessage?null:n.a.createElement("p",null,this.state.errorMessage)),n.a.createElement("button",{className:"save-button",onClick:this.handleSubmit},"Save to My Gifs")))}}]),a}(r.Component),x=function(e){return e[Math.floor(Math.random()*e.length)]},O=function(e){var t=x(e),a=x(e),r=x(e);t!==a&&t!==r||(t=x(e)),a!==t&&a!==r||(a=x(e)),r!==a&&r!==t||(r=x(e));var n=[];return n.push(t,a,r),n},j=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(){var e;return Object(s.a)(this,a),(e=t.call(this)).getMovie=function(t){t.preventDefault(),e.setState({toggleBackups:!1,toggleGifDisplay:!1,backupOptions:[],keywordSearch:[]}),y()({url:"https://api.themoviedb.org/3/search/movie?",params:{method:"GET",responseType:"json",api_key:e.state.moviedbAPI,query:"".concat(e.state.userInput),page:1}}).then((function(t){console.log(t.data.results);var a=t.data.results.filter((function(t){return t.title===e.state.userInput})),r=t.data.results.filter((function(e){return e.popularity>10}));console.log(a,r),1===a.length?e.setState({movieSearch:a,toggleGifDisplay:!0}):0===a.length&&0===r.length?e.setState({errorMessage:"That doesn't seem to be a movie. Why don't you try another one?",movieSearch:[],keywordSearch:[],toggleBackups:!0}):e.setState({errorMessage:"Sorry, which movie were you looking for?",backupOptions:r,movieSearch:[],keywordSearch:[],toggleBackups:!0}),y()({url:"https://api.themoviedb.org/3/movie/".concat(e.state.movieSearch[0].id,"/keywords?"),params:{api_key:"b588f737df1d6878d6133a1a7e0bface"}}).then((function(t){var a=t.data.keywords.map((function(e){return e.name})),r=a.filter((function(e){return!/(based)|(graphic)|(book)|(aftercreditsstinger)|(3d)|(young)|(novel)|(adult)|(comic)|(true story)|(aftercreditsstinger)|(film)|(imax)|(violence)|(film)|(musical)|(director)|(duringcreditsstinger)|(avengers)|(marvel)/g.test(e)&&e}));console.log(r);var n=O(r);e.setState({userInput:"",keywordSearch:n,keywordResults:a})}))})).catch((function(e){}))},e.handleUserInput=function(t){t.preventDefault(),e.setState({userInput:t.target.value})},e.backupSelection=function(t){var a=e.state.backupOptions.filter((function(e){var a=parseInt(t.target.id);return e.id===a}));e.setState({backupOptions:[],toggleBackups:!1,toggleGifDisplay:!0,movieId:t.target.id,movieSearch:a,userInput:""},(function(){y()({url:"https://api.themoviedb.org/3/movie/".concat(e.state.movieSearch[0].id,"/keywords?"),params:{api_key:"b588f737df1d6878d6133a1a7e0bface"}}).then((function(t){console.log(t.data.keywords);var a=t.data.keywords.map((function(e){return e.name})),r=a.filter((function(e){return!/(based)|(graphic)|(book)|(aftercreditsstinger)|(3d)|(young)|(novel)|(adult)|(comic)|(true story)|(aftercreditsstinger)|(film)|(imax)|(violence)|(film)|(musical)|(director)|(duringcreditsstinger)|(avengers)|(marvel)/g.test(e)&&e}));console.log(r);var n=O(r);e.setState({userInput:"",keywordSearch:n,keywordResults:a})}))}))},e.state={errorMessage:"",movieSearch:[],backupOptions:[],movieID:[],keywordSearch:[],keywordResults:[],moviedbAPI:"b588f737df1d6878d6133a1a7e0bface",giphyAPI:"NShPdQTfWnvbvgxLo7Jd7C5qDeFfrsLR",userInput:"",toggleBackups:!1,toggleGifDisplay:!1},e}return Object(l.a)(a,[{key:"render",value:function(){var e=this;return n.a.createElement(r.Fragment,null,n.a.createElement("h3",null,"Type in a movie and get those gifs!"),n.a.createElement("div",{className:"wrapper"},n.a.createElement("form",{onSubmit:this.getMovie,action:""},n.a.createElement("label",{htmlFor:""}),n.a.createElement("input",{value:this.state.userInput,onChange:this.handleUserInput,type:"text",placeholder:"Type a movie",id:"",required:!0}),n.a.createElement("button",{type:"submit"},"Search")),!1===this.state.toggleBackups?null:n.a.createElement(r.Fragment,null,n.a.createElement("div",{className:"backupOptions"},n.a.createElement("h2",null,this.state.errorMessage),this.state.backupOptions.map((function(t){return n.a.createElement("div",{key:t.id,className:"posterContainer"},n.a.createElement("img",{onClick:e.backupSelection,src:"https://image.tmdb.org/t/p/w200/".concat(t.poster_path),alt:"Movie poster for ".concat(t.title),id:t.id,tabIndex:"0"}))})))),!1===this.state.toggleGifDisplay?null:n.a.createElement(w,{keywordResults:this.state.keywordResults,movieTitle:this.state.movieSearch[0].title,gifWords:this.state.keywordSearch,gifTest:"bear"})))}}]),a}(r.Component),I=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(){var e;return Object(s.a)(this,a),(e=t.call(this)).removeSubmission=function(e){S.database().ref("savedResults").child(e).remove()},e.state={savedResults:[]},e}return Object(l.a)(a,[{key:"componentDidMount",value:function(){var e=this;S.database().ref("savedResults").on("value",(function(t){var a=t.val(),r=[];for(var n in a)r.push({id:n,movieTitle:a[n].movieTitle,gif:a[n].gifs});e.setState({savedResults:r})}))}},{key:"render",value:function(){var e=this;return n.a.createElement("div",{className:"highlights"},this.state.savedResults.map((function(t){return n.a.createElement("div",{key:t.id,className:"saved-snapshot"},n.a.createElement("h2",null,t.movieTitle),n.a.createElement("div",{className:"display-box"},n.a.createElement("div",{className:"gif-container"},n.a.createElement("img",{src:t.gif[0].images.fixed_width.url,alt:t.gif[0].title,tabindex:"0"})),n.a.createElement("div",{className:"gif-container"},n.a.createElement("img",{src:t.gif[1].images.fixed_width.url,alt:t.gif[1].title,tabindex:"0"})),n.a.createElement("div",{className:"gif-container"},n.a.createElement("img",{src:t.gif[2].images.fixed_width.url,alt:t.gif[2].title,tabindex:"0"}))),n.a.createElement("button",{onClick:function(){return e.removeSubmission(t.id)}},"Remove"))})))}}]),a}(r.Component),R=(a(79),function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(l.a)(a,[{key:"render",value:function(){return n.a.createElement(d.a,null,n.a.createElement("main",null,n.a.createElement("header",null,n.a.createElement("div",{className:"wrapper"},n.a.createElement("h1",null,"Out of Context Movie Spoiler"),n.a.createElement("nav",null,n.a.createElement("ul",null,n.a.createElement("li",null,n.a.createElement(d.b,{to:"/Out-of-Context-Movie-Spoiler/"},"Home")),n.a.createElement("li",null,n.a.createElement(d.b,{to:"/Out-of-Context-Movie-Spoiler/highlights"},"Highlights")))))),n.a.createElement("section",{className:"wrapper"},n.a.createElement(m.a,{exact:!0,path:"/Out-of-Context-Movie-Spoiler/",component:j}),n.a.createElement(m.a,{exact:!0,path:"/Out-of-Context-Movie-Spoiler/highlights",component:I})),n.a.createElement("footer",null,n.a.createElement("p",{className:"copyright"},"Created by Juno College \xa9 2020"),n.a.createElement("p",null,"Powered by Giphy"))))}}]),a}(r.Component));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(n.a.createElement(n.a.StrictMode,null,n.a.createElement(R,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[46,1,2]]]);
//# sourceMappingURL=main.c0c1fcdd.chunk.js.map